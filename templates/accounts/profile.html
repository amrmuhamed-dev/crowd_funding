{% extends 'home/base.html' %}
{% load static %}
{%block breadcrumb%}

<div class="container" >
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="{%url 'home'%}">Home</a></li>
    <li class="breadcrumb-item active"><b>User Profile</b></li>
  </ol>
</div>
{%endblock%}

{% block content %}

<link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
<div class="container">
    <div class="main-body">
          <div class="row gutters-sm">
            <div class="col-md-4 mb-3">
              <div class="card">
                <div class="card-body">
                  <div class="d-flex flex-column align-items-center text-center">
                    <img src="/media/{{current_user.picture|safe}}" class="card-img-top border border-2 rounded-circle my-3"
                    alt="profile img" style="width: 350px; height:350px;">
                    <div class="mt-3">
                      <h4 class="text-black font-black-bolder mt-2 ">{{user.first_name}} {{user.last_name}}</h4>
                      <p class="text-sm">{{user.email}}</p>
                      <a href="{%url 'update_password' %}"><button class="btn btn-success">Change Password</button></a>
                      <a href="{%url 'deleteaccounts' %}"><button class="btn btn-danger">Delete Account</button></a>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-md-8">
              <div class="card mb-3">
                <div class="card-body">
                  <div class="row">
                    <form method="Post" enctype='multipart/form-data'>
                        {% csrf_token %}
                        {% for msg in messages %}
                        <h4>{{ msg }}</h4>
                        {% endfor %} 
                        <div class="row">
                          <div class="col-md-6 mb-4">
          
                            <div class="form-outline">
                              <label class="form-label" for="firstName"><b>First Name</b></label>
                              <input type="text" id="firstName" name="first_name" value="{{user.first_name}}" class="form-control form-control-lg" readonly/>
                            </div>
          
                          </div>
                          <div class="col-md-6 mb-4">
          
                            <div class="form-outline">
                              <label class="form-label" for="lastName"><b>Last Name</b> </label>
                              <input type="text" id="lastName" name="last_name" value="{{user.last_name}}" class="form-control form-control-lg" readonly/>
                            </div>
          
                          </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-4">
                              <div class="form-outline">
                                <label class="form-label" for="username"><b>Email</b></label>
                                <input type="email" id="email" name="email" value="{{user.email}}" class="form-control form-control-lg" readonly/>
                              </div>
                            </div>
                              <div class="col-md-6 mb-4">
                                <div class="form-outline">
                                  <label class="form-label" for="user_name"><b>User Name</b></label>
                                  <input type="text" id="user_name" name="user_name" value="{{user.username}}" class="form-control form-control-lg"readonly />
                                </div>              
                              </div>   
                            </div>
                            <div class="row">
                              <div class="col-md-12 mb-4">
                                <div class="form-outline">
                                  <label class="form-label" for="image"><b>Profile Image</b></label>
                                  <input type="file" accept="image/*" name="image" id="image" value="{{current_user.picture}}"  class="form-control form-control-alternative"readonly/>
                                </div>
                                </div>
                                </div>
                              <div class="row">
                              <div class="col-md-6 mb-4">
                                <div class="form-outline">
                                  <label class="card-text placeholder-glow"for="birthdate"><b>Birth Date</b></label>
                                  <input type="text" id="birth_date" name="birth_date" value="{{current_user.birthdate}}" placeholder="YY-MM-DD" class="form-control form-control-lg " readonly/>       
                                </div>
                              </div>
                              <div class="col-md-6 mb-4">
                                <div class="form-outline">
                                  <label class="card-text placeholder-glow"for="birthdate"><b>Mobile</b></label>
                                  <input type="text" id="phone" name="phone" value="{{current_user.mobile}}" class="form-control form-control-lg " readonly/>
                                  
                                </div>
                              </div>
                            </div>
        
                            <div class="row">
                              <div class="col-md-6 mb-4">
                                <div class="form-outline">
                                  <label class="form-label" for="image"><b>Country</b></label>
                                  <input type="text" id="country" name="country" value="{{current_user.country}}" class="form-control form-control-lg" readonly/>
                                </div>
                              </div>
                              <div class="col-md-6 mb-4">
                                <div class="form-outline">
                                  <label class="form-label" for="password"><b>FaceBook</b></label>
                                  <input type="text" id="fb_account" name="fb_account"value="{{current_user.fb_account}}"class="form-control form-control-lg" readonly/>
                                  
                                </div>
                              </div>
                            </div>
                          <div class="col-sm-12">
                            <a href="{% url 'profileupdate' %}" class="btn btn-success">  Update Profile Details   </a>
                        </div>
                        </div>
                      </form>
                      </div>
                  </div>
                </div>
              </div>
            <hr>
{% comment %}-----------------------table of Donation-----------------------------{% endcomment %}
<center><h1><b>My Donatios</b></h1></center>             

<div class="row">
  <div class="col-md-12 mt-3" style="padding-right: 0;">
      <table class="table table-hover bg-white rounded shadow-lg p-0 text-center">
          <thead>
              <tr>
                  <th class="px-5 py-3" scope="col">Title</th>
                  <th class="px-5 py-3" scope="col">Donation</th>
                  <th class="px-5 py-3 " scope="col">Donated at</th>
              </tr>
          </thead>
          <tbody>

                  <tr>


                  </tr>
          </tbody>
      </table>
  </div>
</div>


{% comment %} -----------------------my projects----------------------------- {% endcomment %}
<hr>

<center><h1><b>My Projects</b></h1></center>      

<div class="row">
  <div class="col-md-12 mt-3" style="padding-right: 0;">
      <table class="table table-hover bg-white rounded shadow-lg p-0 text-center">
          <thead>
              <tr>
                  <th class="px-5 py-3" scope="col">Title</th>
                  <th class="px-5 py-3" scope="col">Details</th>
                  <th class="px-5 py-3" scope="col">Total Target</th>
                  <th class="px-5 py-3" scope="col">Start Time</th>
                  <th class="px-5 py-3" scope="col">End Time</th>
                  <th class="px-5 py-3" scope="col">Creation Date</th>
                  <th class="px-5 py-3" scope="col">Category</th>
                  <th class="px-5 py-3" scope="col">Donations</th>
              </tr>
          </thead>
          <tbody>
              {% if user_compaign %}
                  {% for compaign in user_compaign %}
                      {% for category in categories %} 
                                {% if category.compaign_categ_id == compaign.id%} 
                                        <tr>
                                            <td class="px-5 py-3">{{compaign.title}}</td>
                                            <td class="px-5 py-3"><a href="{%url 'compaign_details' compaign.pk%}">{{compaign.details|truncatewords:3}} </a></td>
                                            <td class="px-5 py-3">{{compaign.total_target}}</td>
                                            <td class="px-5 py-3">{{compaign.start_time}}</td>
                                            <td class="px-5 py-3">{{compaign.end_time}}</td>
                                            <td class="px-5 py-3">{{compaign.creation_date}}</td>
                                            <td class="px-5 py-3">{{category.category}}</td>
                                            <td class="px-5 py-3">{{donation.donation}}</td>
                                        </tr>
                                {%endif%}
                    {%endfor%}
                  {%endfor%}

              {%else%}
                  <tr><td colspan="3">You haven't any project yet </td></tr>
              {% endif %}
          </tbody>
          
      </table>
  </div>
</div>

{% comment %} ---------------------------------------------------------------- {% endcomment %}
{% endblock content %}
